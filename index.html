<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flappy Bird 2025</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts for modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background: linear-gradient(135deg, #0f2027, #2c5364 100%);
            min-height: 100vh;
            font-family: 'Montserrat', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }
        h1 {
            color: #fff;
            margin-top: 32px;
            font-size: 2.5rem;
            letter-spacing: 2px;
            text-shadow: 0 4px 24px #0008;
        }
        #gameContainer {
            margin-top: 24px;
            background: rgba(255,255,255,0.08);
            border-radius: 32px;
            box-shadow: 0 8px 32px #0006;
            padding: 32px 24px 24px 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            backdrop-filter: blur(8px);
        }
        canvas {
            border-radius: 24px;
            background: linear-gradient(180deg, #a8edea 0%, #fed6e3 100%);
            box-shadow: 0 4px 24px #0004;
            display: block;
        }
        .glass {
            background: rgba(255,255,255,0.18);
            border-radius: 16px;
            box-shadow: 0 4px 24px #0002;
            padding: 16px 24px;
            margin: 16px 0;
            backdrop-filter: blur(6px);
        }
        #startScreen, #gameOverScreen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 10;
            background: rgba(30,40,60,0.72);
            border-radius: 24px;
            color: #fff;
            font-size: 1.2rem;
            font-weight: 700;
            text-align: center;
        }
        #startScreen input, #startScreen select {
            margin: 12px 0;
            padding: 10px 18px;
            border-radius: 8px;
            border: none;
            font-size: 1.1rem;
            font-family: inherit;
            background: rgba(255,255,255,0.8);
            outline: none;
            transition: box-shadow 0.2s;
        }
        #startBtn, #restartBtn {
            margin-top: 18px;
            padding: 12px 32px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(90deg, #43cea2 0%, #185a9d 100%);
            color: #fff;
            font-size: 1.2rem;
            font-weight: 900;
            letter-spacing: 1px;
            cursor: pointer;
            box-shadow: 0 2px 12px #0003;
            transition: background 0.2s, transform 0.1s;
        }
        #startBtn:hover, #restartBtn:hover {
            background: linear-gradient(90deg, #185a9d 0%, #43cea2 100%);
            transform: scale(1.04);
        }
        #hud {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin: 12px 0 0 0;
            font-size: 1.1rem;
            color: #222;
            font-weight: 700;
            text-shadow: 0 2px 8px #fff8;
        }
        #score, #timer, #playerName {
            margin: 0 18px;
        }
        @media (max-width: 600px) {
            #gameContainer {
                padding: 8px 2px 2px 2px;
            }
            canvas {
                width: 95vw !important;
                height: 60vw !important;
            }
        }
    </style>
</head>
<body>
    <h1>Flappy Bird 2025</h1>
    <div id="gameContainer">
        <div id="hud">
            <span id="playerName"></span>
            <span id="score">Score: 0</span>
            <span id="timer">Time: 0.0s</span>
        </div>
        <canvas id="gameCanvas" width="420" height="600"></canvas>
        <!-- Start Screen -->
        <div id="startScreen" class="glass">
            <div style="font-size:1.5rem;margin-bottom:12px;">Welcome to Flappy Bird 2025!</div>
            <input id="nameInput" type="text" maxlength="16" placeholder="Enter your name..." autocomplete="off" />
            <select id="difficultySelect">
                <option value="easy">Easy ðŸŸ¢</option>
                <option value="medium" selected>Medium ðŸŸ¡</option>
                <option value="hard">Hard ðŸ”´</option>
            </select>
            <button id="startBtn">Start Game</button>
            <div style="margin-top:10px;font-size:1rem;color:#eee;">Press <b>Space</b> or tap to flap!</div>
        </div>
        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="glass" style="display:none;">
            <div id="gameOverMsg" style="font-size:1.5rem;margin-bottom:10px;"></div>
            <div id="finalScore" style="font-size:1.2rem;margin-bottom:10px;"></div>
            <div id="finalTime" style="font-size:1.1rem;margin-bottom:18px;"></div>
            <button id="restartBtn">Play Again</button>
        </div>
    </div>
    <script>
        // --- Game Constants ---
        const DIFFICULTY = {
            easy:   { gravity: 0.32, flap: -6.5, gap: 170, speed: 2.2, freq: 110 },
            medium: { gravity: 0.38, flap: -7.2, gap: 140, speed: 2.9, freq: 90 },
            hard:   { gravity: 0.44, flap: -8.2, gap: 110, speed: 3.7, freq: 70 }
        };
        const BIRD_RADIUS = 22;
        const PILLAR_WIDTH = 62;
        const PILLAR_COLOR = "#2dce98";
        const PILLAR_EDGE = "#185a9d";
        const BIRD_COLOR = "#ffb347";
        const BIRD_STROKE = "#ff7f50";
        const FPS = 60;

        // --- DOM Elements ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const nameInput = document.getElementById('nameInput');
        const difficultySelect = document.getElementById('difficultySelect');
        const scoreSpan = document.getElementById('score');
        const timerSpan = document.getElementById('timer');
        const playerNameSpan = document.getElementById('playerName');
        const gameOverMsg = document.getElementById('gameOverMsg');
        const finalScore = document.getElementById('finalScore');
        const finalTime = document.getElementById('finalTime');

        // --- Game State ---
        let state = 'start'; // start, playing, gameover
        let playerName = '';
        let difficulty = 'medium';
        let settings = DIFFICULTY[difficulty];
        let bird, pillars, score, timer, startTime, animationId;

        // --- Responsive Canvas ---
        function resizeCanvas() {
            let w = Math.min(window.innerWidth * 0.95, 420);
            let h = Math.max(Math.min(window.innerHeight * 0.7, 600), 350);
            canvas.width = w;
            canvas.height = h;
        }
        window.addEventListener('resize', resizeCanvas);

        // --- Game Functions ---
        function resetGameVars() {
            settings = DIFFICULTY[difficulty];
            bird = {
                x: canvas.width * 0.22,
                y: canvas.height / 2,
                vy: 0,
                radius: BIRD_RADIUS,
                alive: true
            };
            pillars = [];
            score = 0;
            timer = 0;
            startTime = null;
            scoreSpan.textContent = "Score: 0";
            timerSpan.textContent = "Time: 0.0s";
        }

        function startGame() {
            playerName = nameInput.value.trim() || "Player";
            difficulty = difficultySelect.value;
            playerNameSpan.textContent = playerName;
            resetGameVars();
            state = 'playing';
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            scoreSpan.textContent = "Score: 0";
            timerSpan.textContent = "Time: 0.0s";
            animationId = requestAnimationFrame(gameLoop);
        }

        function endGame() {
            state = 'gameover';
            cancelAnimationFrame(animationId);
            gameOverMsg.textContent = `Game Over, ${playerName}!`;
            finalScore.textContent = `Score: ${score}`;
            finalTime.textContent = `Time: ${timer.toFixed(1)}s`;
            gameOverScreen.style.display = 'flex';
        }

        function flap() {
            if (state === 'playing') {
                bird.vy = settings.flap;
            }
        }

        function addPillar() {
            // Randomize gap position
            const minGapY = 60;
            const maxGapY = canvas.height - settings.gap - 60;
            const gapY = Math.random() * (maxGapY - minGapY) + minGapY;
            pillars.push({
                x: canvas.width + 10,
                width: PILLAR_WIDTH,
                top: { y: 0, height: gapY },
                bottom: { y: gapY + settings.gap, height: canvas.height - (gapY + settings.gap) },
                passed: false
            });
        }

        function updateGame(dt) {
            // Bird physics
            bird.vy += settings.gravity;
            bird.y += bird.vy;

            // Bird collision with ground/ceiling
            if (bird.y + bird.radius > canvas.height) {
                bird.y = canvas.height - bird.radius;
                bird.alive = false;
            }
            if (bird.y - bird.radius < 0) {
                bird.y = bird.radius;
                bird.vy = 0;
            }

            // Pillar logic
            if (animationId % settings.freq === 0) addPillar();
            for (let p of pillars) {
                p.x -= settings.speed;
            }
            // Remove off-screen pillars
            while (pillars.length && pillars[0].x + PILLAR_WIDTH < 0) pillars.shift();

            // Collision detection & scoring
            for (let p of pillars) {
                // Score
                if (!p.passed && p.x + PILLAR_WIDTH < bird.x - bird.radius) {
                    score++;
                    scoreSpan.textContent = `Score: ${score}`;
                    p.passed = true;
                }
                // Collision
                if (
                    bird.x + bird.radius > p.x && bird.x - bird.radius < p.x + PILLAR_WIDTH &&
                    (
                        bird.y - bird.radius < p.top.y + p.top.height ||
                        bird.y + bird.radius > p.bottom.y
                    )
                ) {
                    bird.alive = false;
                }
            }
        }

        function drawGame() {
            // Background
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // Sky gradient
            let grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
            grad.addColorStop(0, "#a8edea");
            grad.addColorStop(1, "#fed6e3");
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Pillars
            for (let p of pillars) {
                // Top
                ctx.fillStyle = PILLAR_COLOR;
                ctx.strokeStyle = PILLAR_EDGE;
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.rect(p.x, p.top.y, PILLAR_WIDTH, p.top.height);
                ctx.fill();
                ctx.stroke();
                // Bottom
                ctx.beginPath();
                ctx.rect(p.x, p.bottom.y, PILLAR_WIDTH, p.bottom.height);
                ctx.fill();
                ctx.stroke();
            }

            // Bird (with shadow)
            ctx.save();
            ctx.globalAlpha = 0.18;
            ctx.beginPath();
            ctx.arc(bird.x + 8, bird.y + 18, bird.radius * 0.95, 0, Math.PI * 2);
            ctx.fillStyle = "#444";
            ctx.fill();
            ctx.restore();

            // Bird body
            ctx.save();
            ctx.beginPath();
            ctx.arc(bird.x, bird.y, bird.radius, 0, Math.PI * 2);
            ctx.fillStyle = BIRD_COLOR;
            ctx.shadowColor = "#ffecb3";
            ctx.shadowBlur = 16;
            ctx.fill();
            ctx.lineWidth = 4;
            ctx.strokeStyle = BIRD_STROKE;
            ctx.stroke();
            // Eye
            ctx.beginPath();
            ctx.arc(bird.x + bird.radius * 0.38, bird.y - bird.radius * 0.18, bird.radius * 0.22, 0, Math.PI * 2);
            ctx.fillStyle = "#fff";
            ctx.fill();
            ctx.beginPath();
            ctx.arc(bird.x + bird.radius * 0.48, bird.y - bird.radius * 0.18, bird.radius * 0.09, 0, Math.PI * 2);
            ctx.fillStyle = "#222";
            ctx.fill();
            ctx.restore();
        }

        function gameLoop(ts) {
            if (state !== 'playing') return;
            if (!startTime) startTime = performance.now();
            let dt = (performance.now() - startTime) / 1000;
            timer = dt;
            timerSpan.textContent = `Time: ${timer.toFixed(1)}s`;

            updateGame(dt);
            drawGame();

            if (!bird.alive) {
                endGame();
                return;
            }
            animationId = requestAnimationFrame(gameLoop);
        }

        // --- Event Listeners ---
        startBtn.onclick = () => {
            if (!nameInput.value.trim()) {
                nameInput.focus();
                nameInput.style.boxShadow = "0 0 0 2px #ff7f50";
                setTimeout(() => nameInput.style.boxShadow = "", 800);
                return;
            }
            resizeCanvas();
            startGame();
        };
        restartBtn.onclick = () => {
            startScreen.style.display = 'flex';
            gameOverScreen.style.display = 'none';
            nameInput.value = playerName;
            difficultySelect.value = difficulty;
            playerNameSpan.textContent = '';
            scoreSpan.textContent = "Score: 0";
            timerSpan.textContent = "Time: 0.0s";
            resetGameVars();
            state = 'start';
        };
        // Flap on space/tap
        document.addEventListener('keydown', e => {
            if (state === 'playing' && (e.code === 'Space' || e.key === ' ')) {
                e.preventDefault();
                flap();
            }
        });
        canvas.addEventListener('pointerdown', () => {
            if (state === 'playing') flap();
        });

        // --- Initialization ---
        resizeCanvas();
        resetGameVars();
        startScreen.style.display = 'flex';
        gameOverScreen.style.display = 'none';
        playerNameSpan.textContent = '';
    </script>
</body>
</html>